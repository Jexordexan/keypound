!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.keypound=t()}(this,function(){"use strict";function e(e){return u[e]||e.toUpperCase().charCodeAt(0)}function t(e){var t=e.replace(/\s/g,"").split(","),n=t.length-1;return""===t[n]&&(t[n-1]+=",",t=t.slice(0,-1)),t}function n(e){var t={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1};return e.slice(0,-1).forEach(function(e){var n=r[e],i=o[n];t[i]=!0}),t}function i(e,t){return a.every(function(n){return e[n]===t[n]})}for(var r={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},o={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"},a=Object.keys(o).map(function(e){return o[e]}),u={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},s=1;s<20;s++)u["f"+s]=111+s;var c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(i=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c(this,r),this.name=e,this._block=n.block||!1,this._paused=!1,this._master=t,this._bindings={}}return f(r,[{key:"__dispatch",value:function(e){if(this._paused)return!1;var t=e.keyCode;return t in this._bindings?(this._bindings[t].filter(function(t){return i(t.mods,e)}).forEach(function(t){return t.handler(e,t)}),!0):this._block}},{key:"on",value:function(i,r,o){var a=this;t(i).forEach(function(t){var i=[];t=t.split("+"),i=n(t),t.length>1&&(t=[t[t.length-1]]),t=t[0],t=e(t),t in a._bindings||(a._bindings[t]=[]),a._bindings[t].push({key:t,handler:r,mods:i,options:o})})}},{key:"off",value:function(n){var i=this;t(n).forEach(function(t){t=t.split("+"),t.length>1&&(t=[t[t.length-1]]),t=t[0],(t=e(t))in i._bindings&&delete i._bindings[t]})}},{key:"exit",value:function(){this._master.exit(this.name)}},{key:"pause",value:function(){this._paused=!0}},{key:"play",value:function(){this._paused=!1}}]),r}();return function(){function e(){var t=this;c(this,e),this.stack=[],document.addEventListener("keydown",function(e){return t.onKeyPress(e)})}return f(e,[{key:"enter",value:function(e,t){var n=this.getStackIndex(e);return n>-1?this.moveToTop(n):this.enterNewContext(e,t)}},{key:"exit",value:function(e){var t=this.getStackIndex(e);t>-1&&this.stack.splice(t,1)}},{key:"onKeyPress",value:function(e){for(var t=this.stack.length,n=!1;!n&&t--;)n=this.stack[t].__dispatch(e)}},{key:"moveToTop",value:function(e){var t=this.stack.splice(e,1),n=l(t,1),i=n[0];return this.stack.push(i),i}},{key:"enterNewContext",value:function(e,t){var n=new h(e,this,t);return this.stack.push(n),n}},{key:"getStackIndex",value:function(e){return this.stack.findIndex(function(t){return t.name===e})}}]),e}()});
//# sourceMappingURL=dist/keypound.min.js.map
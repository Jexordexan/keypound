!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.keypound=e()}(this,function(){"use strict";function t(t){return u[t]||t.toUpperCase().charCodeAt(0)}function e(t){var e=t.replace(/\s/g,"").split(","),n=e.length-1;return""===e[n]&&(e[n-1]+=",",e=e.slice(0,-1)),e}function n(t){var e={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1};return t.slice(0,-1).forEach(function(t){var n=r[t],i=o[n];e[i]=!0}),e}function i(t,e){return a.every(function(n){return t[n]===e[n]})}for(var r={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},o={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"},a=Object.keys(o).map(function(t){return o[t]}),u={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},s=1;s<20;s++)u["f"+s]=111+s;var c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c(this,r),this.name=t,this._block=n.block||!1,this._paused=!1,this._master=e,this._bindings={}}return f(r,[{key:"__dispatch",value:function(t){if(this._paused)return!1;var e=t.keyCode,n=!1;return e in this._bindings?(this._bindings[e].filter(function(e){return i(e.mods,t)}).forEach(function(e){e.options&&e.options.prevent&&t.preventDefault(),e.handler(t,e),n=!0}),n):this._block}},{key:"on",value:function(i,r,o){var a=this;e(i).forEach(function(e){var u=[];e=e.split("+"),u=n(e),e.length>1&&(e=[e[e.length-1]]),e=e[0],e=t(e),e in a._bindings||(a._bindings[e]=[]),a._bindings[e].push({key:e,handler:r,mods:u,options:o,shortcut:i})})}},{key:"off",value:function(n){var i=this;e(n).forEach(function(e){e=e.split("+"),e.length>1&&(e=[e[e.length-1]]),e=e[0],(e=t(e))in i._bindings&&delete i._bindings[e]})}},{key:"exit",value:function(){this._master.exit(this.name)}},{key:"pause",value:function(){this._paused=!0}},{key:"play",value:function(){this._paused=!1}}]),r}();return function(){function t(){var e=this;c(this,t),this.stack=[],document.addEventListener("keydown",function(t){return e.onKeyPress(t)})}return f(t,[{key:"enter",value:function(t,e){var n=this.getStackIndex(t);return n>-1?this.moveToTop(n):this.enterNewContext(t,e)}},{key:"exit",value:function(t){var e=this.getStackIndex(t);e>-1&&this.stack.splice(e,1)}},{key:"onKeyPress",value:function(t){for(var e=this.stack.length,n=!1;!n&&e--;)n=this.stack[e].__dispatch(t)}},{key:"moveToTop",value:function(t){var e=this.stack.splice(t,1),n=l(e,1),i=n[0];return this.stack.push(i),i}},{key:"enterNewContext",value:function(t,e){var n=new h(t,this,e);return this.stack.push(n),n}},{key:"getStackIndex",value:function(t){return this.stack.findIndex(function(e){return e.name===t})}}]),t}()});
//# sourceMappingURL=dist/keypound.min.js.map